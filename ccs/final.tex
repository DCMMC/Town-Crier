\documentclass{sig-alternate-05-2015}

\usepackage{acmcopyright}
\usepackage{epsfig,endnotes}
\let\proof\relax
\let\endproof\relax
\usepackage{amsthm}
\usepackage{tabularx}
\usepackage{boxedminipage}
\usepackage[override]{cmtt}
\usepackage[utf8]{inputenc}
\usepackage{color,xcolor}
\usepackage{graphicx}
\usepackage{xspace}
\usepackage{latexsym}
\usepackage[sort]{cite}
\usepackage{url,hyperref}
%\usepackage{setspace}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{pgfplots}
\pgfplotsset{compat=1.9}
\usepackage{textcomp}

% suppress left margin for items
\usepackage{enumitem}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}

\usepackage{tikz}
\usetikzlibrary{arrows,calc,fit,matrix,positioning,shapes.misc,shapes}

\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\tikzset{%
  entity/.style={rectangle,draw=black,align=center},
  trusted/.style={fill=green!30},
  communication/.style={blue},
  comm-link/.style={communication,ultra thick,text=black},
  bg-box/.style={rectangle,rounded corners,inner sep=0.6em},
  blockchain-color/.style={fill=blue!15},
  tc-server-color/.style={fill=black!18},
  every path/.style={>=stealth},
}

\usepackage{listings}
\lstdefinestyle{Solidity}
{
  language=C++,
  basicstyle={\small\ttfamily},
  morekeywords={function,contract,constant},
  emph={address,uint8,uint32,uint,uint64,bytes4,bytes32},
  keywordstyle={\color{darkgreen}},
  emphstyle={\color{darkblue}},
  commentstyle={\color{gray}\slshape},
  frame=single,
}

%\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}

\newcommand{\kyle}[1]{}
\newcommand{\fan}[1]{}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\newcommand{\ari}[1]{}
\newcommand{\ethan}[1]{}
\newcommand{\elaine}[1]{}

% Complex \xxx for making notes of things to do.  Use \xxx{...} for general
% notes, and \xxx[who]{...} if you want to blame someone in particular.
% Puts text in brackets and in bold font, and normally adds a marginpar
% with the text ``xxx'' so that it is easy to find.  On the other hand, if
% the comment is in a minipage, figure, or caption, the xxx goes in the text,
% because marginpars are not possible in these situations.
{\makeatletter
 \gdef\xxxmark{%
   \expandafter\ifx\csname @mpargs\endcsname\relax % in minipage?
     \expandafter\ifx\csname @captype\endcsname\relax % in figure/caption?
       \marginpar{\textcolor{red}{xxx~}}% not in a caption or minipage, can use marginpar
     \else
       \textcolor{red}{xxx~}% notice trailing space
     \fi
   \else
     \textcolor{red}{xxx~}% notice trailing space
   \fi}
 \gdef\xxx{\@ifnextchar[\xxx@lab\xxx@nolab}
 \long\gdef\xxx@lab[#1]#2{{\bf \small [\xxxmark \textcolor{red}{#2} ---{\sc #1}]}\xspace}
 \long\gdef\xxx@nolab#1{{\bf \small [\xxxmark \textcolor{red}{#1}]}\xspace}
}

\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}

\newtheorem*{rethm}{\retitle}
\newenvironment{retheorem}[1]{%
  \def \retitle{Theorem \ref{#1}}%
  \begin{rethm}%
}{\end{rethm}}

%\frenchspacing

\begin{document}

\title{Town Crier: \\ An Authenticated Data Feed for Smart Contracts}


\iftrue
\numberofauthors{5} 
\author{
% 1st. author
\alignauthor Fan Zhang \\
  \affaddr{Cornell University}\\
  \affaddr{IC3${}^\dagger$}\\
  \email{fanz@cs.cornell.edu}
% 2nd. author
\alignauthor Ethan Cecchetti \\
  \affaddr{Cornell University}\\
  \affaddr{IC3${}^\dagger$}\\
  \email{ethan@cs.cornell.edu}
% 3rd. author
\alignauthor Kyle Croman \\
  \affaddr{Cornell University}\\
  \affaddr{IC3${}^\dagger$}\\
  \email{kcroman@cs.cornell.edu}
\and  % use '\and' if you need 'another row' of author names
% 4th. author
\alignauthor Ari Juels \\
  \affaddr{Cornell Tech, Jacobs Institute}\\
  \affaddr{IC3${}^\dagger$}\\
  \email{juels@cornell.edu}
% 5th. author
\alignauthor Elaine Shi \\
  \affaddr{Cornell University}\\
  \affaddr{IC3${}^\dagger$}\\
  \email{rs2358@cornell.edu}
\and
\affaddr{${}^\dagger$Initiative for CryptoCurrencies and Contracts}
}
\fi

\iffalse
\numberofauthors{5}%
\author{
%% 1st. author
\alignauthor 
Fan Zhang$^{1,3}$ \\
  \email{fanz@cs.cornell.edu}
% 2nd. author
\alignauthor 
Ethan Cecchetti$^{1,3}$\\
  \email{ethan@cs.cornell.edu}
% 3rd. author
\alignauthor 
Kyle Croman$^{1,3}$ \\
  \email{kcroman@cs.cornell.edu}
\and  
% 4th. author
\alignauthor 
Ari Juels$^{2,3}$ \\
  \email{juels@cornell.edu}
% 5th. author
\alignauthor 
Elaine Shi$^{1,3}$ \\
  \email{rs2358@cornell.edu}
\and
\affaddr{$^1$Cornell University}
\affaddr{$^2$Cornell Tech, Jacobs Institute}
\affaddr{$^3$Initiative for CryptoCurrencies and Contracts}
}
\fi

%**** COLORS *********
\definecolor{maroon}{RGB}{178, 34, 34}
%\definecolor{brown}{RGB}{139, 137, 137}
\definecolor{gold}{rgb}{0.85, 0.65, 0.13}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{darkblue}{rgb}{0, 0, 0.5}

\newcommand{\smaroon}[1]{\ensuremath{\textcolor{maroon}{\tt #1}\xspace}}
\newcommand{\sgold}[1]{\ensuremath{\textcolor{gold}{\tt #1}\xspace}}
\newcommand{\sbrown}[1]{\ensuremath{\textcolor{brown}{\tt #1}\xspace}}
\newcommand{\sblue}[1]{\ensuremath{\textcolor{darkblue}{\tt #1}\xspace}}

\newcommand{\sgray}[1]{{\color{gray} #1}}

%**** DEFINITIONS *********

\newcommand {\tcs} {Town Crier\xspace}
\newcommand {\tc} {TC\xspace}
\newcommand {\tcontract} {{TC Contract}\xspace}
\newcommand {\encname} {{Enclave}\xspace}
\newcommand {\medname} {{Relay}\xspace}
\newcommand {\Time} {{{\tt T}}}


\newcommand {\cont} {\ensuremath{{\cal C}}\xspace}
\newcommand {\wallet} {\ensuremath{{\cal W}}\xspace}
\newcommand {\reqcont} {\ensuremath{\cont_U}\xspace}
\newcommand {\tcont} {\ensuremath{\cont_{\it TC}}\xspace}
\newcommand {\tcadd} {\ensuremath{\wallet_{\it TC}}\xspace}
\newcommand {\sgxadd} {\ensuremath{\wallet_{\it SGX}}\xspace}
\newcommand{\pkTC}{\ensuremath{{\sf pk}_{\it TC}}\xspace}
\newcommand{\skTC}{\ensuremath{{\sf sk}_{\it TC}}\xspace}
\newcommand{\userwallet}{\ensuremath{\wallet_U}\xspace}
\newcommand{\specialwallet}{\ensuremath{\wallet^*}\xspace}

\newcommand {\dgreq} {{\sf req}\xspace}
\newcommand {\dgform} {{\sf params}\xspace}
\newcommand {\dgspec} {{\sf spec}\xspace}
\newcommand {\dgpay} {{\sf \$fee}\xspace}
\newcommand {\dg} {{\sf d}\xspace}
\newcommand {\dgret} {{\sf ans}\xspace}
\newcommand {\dgm} {{\sf data}\xspace}
\newcommand {\dgid} {{\sf id}\xspace}
\newcommand {\dgcallback} {{\sf callback}\xspace}

\newcommand {\att} {{\sf att}\xspace}

\newcommand{\fsgx}{\ensuremath{\mathcal{F}_{\textrm{sgx}}}\xspace}
\newcommand{\pk}{\ensuremath{{\sf pk}}}
\newcommand{\sk}{\ensuremath{{\sf sk}}}
\newcommand{\pkM}{\ensuremath{{\sf pk}_{\mathrm{sgx}}}}
\newcommand{\skM}{\ensuremath{{\sf sk}_{\mathrm{sgx}}}}
\newcommand{\pksgx}{\ensuremath{{\sf pk}_{\textrm{TC}}}\xspace}
\newcommand{\sksgx}{\ensuremath{{\sf sk}_{\textrm{TC}}}\xspace}
\newcommand{\pkurl}{\ensuremath{{\sf pk}_{\textrm{url}}}\xspace}
\newcommand{\relay}{\ensuremath{\mathcal{R}}\xspace}
\newcommand{\engine}{\ensuremath{\enclaveprog}\xspace}
\newcommand{\enclaveprog}{\ensuremath{{\sf prog}_{\textrm{encl}}}\xspace}
\newcommand{\prog}{\ensuremath{{\sf prog}}\xspace}
\newcommand{\sigatt}{\ensuremath{{\sigma_{\textrm{att}}}}\xspace}
\newcommand{\sigsgx}{\ensuremath{{\Sigma_{\textrm{sgx}}}}}
\newcommand{\weburl}{\ensuremath{{{\sf url}}}\xspace}
\newcommand{\clock}{\ensuremath{{{\sf clock}}}}
\newcommand{\algA}{\ensuremath{\mathcal{A}}}
\newcommand{\algB}{\ensuremath{\mathcal{B}}}

\newcommand{\initcall}{\texttt{init}\xspace}
\newcommand{\attcall}{\texttt{attest}\xspace}
\newcommand{\resumecall}{\texttt{resume}\xspace}

\newcommand{\gas}{\sbrown{\$g}\xspace}
\newcommand{\constgasmin}{\sblue{\$G_\text{min}}\xspace}
\newcommand{\constgasmax}{\sblue{\$G_\text{max}}\xspace}
\newcommand{\constgascancel}{\sblue{\$G_\emptyset}\xspace}
\newcommand{\gasdeliver}{\sbrown{\$g_\text{dvr}}\xspace}
\newcommand{\gasrequest}{\sbrown{\$g_\text{req}}\xspace}
\newcommand{\gascallback}{\sbrown{\$g_\text{clbk}}\xspace}
\newcommand{\gascancel}{\sbrown{\$g_\text{cncl}}\xspace}
\newcommand{\fee}{\smaroon{\$f}\xspace}
\newcommand{\constgasinvokecancel}{\sblue{\$G_\text{cncl}}\xspace}
\newcommand{\constgasrequest}{\sblue{\$G_\text{req}}\xspace}
\newcommand{\consthonestfee}{\sblue{\$F}\xspace}

\newcommand{\msgi}[1]{\ensuremath{\textbf{msg}.m_{#1}}}
\newcommand{\bal}[1]{\ensuremath{{\sf bal}({#1})}}

\newcommand{\tcb}{\ensuremath{\mathcal{T}}\xspace}
\newcommand{\tcboff}{\ensuremath{\tcb_{\textsf{Off}}}\xspace}
\newcommand{\tcbon}{\ensuremath{\tcb_{\textsf{On}}}\xspace}
\newcommand{\oauth}{\ensuremath{\mathcal{O}_{\textsf{Auth}}}\xspace}
\newcommand{\pkoff}{\ensuremath{\textsf{pk}_{\textsf{Off}}}\xspace}

\renewcommand{\paragraph}[1]{{\vspace{5pt}\noindent\textbf{#1}}}

\CopyrightYear{2016} 
\setcopyright{acmcopyright}
\conferenceinfo{CCS'16,}{October 24-28, 2016, Vienna, Austria}
\isbn{978-1-4503-4139-4/16/10}\acmPrice{\$15.00}
\doi{http://dx.doi.org/10.1145/2976749.2978326}

\clubpenalty=10000 
\widowpenalty = 10000

\maketitle

\input{abstract}

\vspace{1mm}
\noindent
{\bf Keywords:} Authenticated Data Feeds; Smart Contracts; Trusted Hardware; 
Intel SGX; Ethereum; Bitcoin


\input{introduction}
\input{background}
\input{architecture}
\input{protocol_overview}
\input{challenges}
\input{protocol-new}
\input{analysis}
%\input{applications}
\input{experiments}

\input{related}
\input{future-work}
\input{conclusion}
\input{acknowledgements}

\bibliographystyle{abbrv}
\bibliography{ethereum,fan,bitcoin,elaine}

%\pagebreak
%\appendix 
%\input{implementation}
%\input{sgxmodel}
%\input{analysis-proofs}
%\input{applications-full}

%\theendnotes
\end{document}

\section{Gas Sustainability}
\label{sec:gas-sustainability}

Recall from Section~\ref{sec:contracts-and-gas} that computation in Ethereum is not free; it employs \emph{gas} to fuel contracts.
For a call to a contract, that cost is paid by the user who initiates the transaction, regardless of what other contracts are called as part of execution.
This means that any service which initiates calls to Ethereum contracts must spend money to execute those calls.
Without careful design, such services run the risk of a malicious user (or protocol bug) draining financial resources by provoking blockchain transactions for which the service will not be reimbursed.
In turn, this would lead to the service being unable to serve legitimate requests.
It is therefore critical for liveness of Ethereum-based services that they always be reimbursed for blockchain computation they initiate.

We note that the principle we define here is not Ethereum specific.
Any blockchain-based smart contract system must require fees to reimburse miners for performing and verifying computation.
If, like in Ethereum, all fees are paid by the user who initiates the computation, then this concern still applies.
To ensure that a service is not vulnerable to such attacks, we define \emph{gas sustainability}, a new condition necessary for liveness of blockchain contract-based services.

Let \bal{\wallet} denote the balance of an Ethereum wallet \wallet.

\begin{definition}[$K$-Gas Sustainability]
  \label{def:gas-sustainability}
  A service with wallet \wallet and blockchain functions $f_1, \dotsc, f_n$ is \emph{$K$-gas sustainable} for $K > 0$ if,
  when $\bal{\wallet} \geq K$ before any $f_i$s are executed and the service behaves honestly,
  then after each execution of any $f_i$ initiated by \wallet, $\bal{\wallet} \geq K$.
\end{definition}

As mentioned in Section~\ref{sec:contracts-and-gas}, Ethereum requires that a user have enough ether to pay for gas expenditures.
If insufficient gas is provided, while the transaction aborts, the gas is still spent.
This means that Ethereum only guarantees that $\bal{\wallet} \geq 0$ and if a transaction is submitted by a wallet with insufficient funds, the balance will reduce to 0.
Because the above definition requires $K > 0$, this guarantees not only that each blockchain call reimburses the service,
but also that the service can afford the gas for each call it makes since otherwise the reimbursement would be reverted with the rest of the transaction.

We show in Section~\ref{sec:protocol} how we design \tc to be gas sustainable and prove that fact in Section~\ref{sec:analysis}.


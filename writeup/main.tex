\documentclass[letterpaper,twocolumn,10pt]{article}
\usepackage{usenix,epsfig,endnotes}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{boxedminipage}
\usepackage[override]{cmtt}
\usepackage[utf8]{inputenc}
\usepackage{color,xcolor}
\usepackage{graphicx}
\usepackage{xspace}
\usepackage{amsmath,amstext,amssymb,amsfonts,latexsym}
\usepackage{url,hyperref}
\usepackage{setspace}
\usepackage{siunitx}
\usepackage{booktabs}

% suppress left margin for items
\usepackage{enumitem}
\setlist[itemize]{leftmargin=*}
\setlist[enumerate]{leftmargin=*}

\usepackage{tikz}
\usetikzlibrary{arrows,calc,fit,matrix,positioning,shapes.misc,shapes}

\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\tikzset{%
  entity/.style={rectangle,draw=black,align=center},
  trusted/.style={fill=green!30},
  communication/.style={blue},
  comm-link/.style={communication,ultra thick,text=black},
  bg-box/.style={rectangle,rounded corners,inner sep=0.6em},
  blockchain-color/.style={fill=blue!15},
  tc-server-color/.style={fill=black!18},
  every path/.style={>=stealth},
}

\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}

\newcommand{\kyle}[1]{\textcolor{blue}{[\textsf{Kyle:  #1}]}}
\newcommand{\fan}[1]{\textcolor{red}{[\small \bf {Fan:  #1}]}}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\newcommand{\ari}[1]{\textcolor{darkgreen}{[\textsf{Ari:  #1}]}}
\newcommand{\ethan}[1]{\textcolor{cyan}{[\small \textsf{Ethan: #1}]}}
\newcommand{\elaine}[1]{\textcolor{magenta}{[\textsf{elaine:  #1}]}}

% Complex \xxx for making notes of things to do.  Use \xxx{...} for general
% notes, and \xxx[who]{...} if you want to blame someone in particular.
% Puts text in brackets and in bold font, and normally adds a marginpar
% with the text ``xxx'' so that it is easy to find.  On the other hand, if
% the comment is in a minipage, figure, or caption, the xxx goes in the text,
% because marginpars are not possible in these situations.
{\makeatletter
 \gdef\xxxmark{%
   \expandafter\ifx\csname @mpargs\endcsname\relax % in minipage?
     \expandafter\ifx\csname @captype\endcsname\relax % in figure/caption?
       \marginpar{\textcolor{red}{xxx~}}% not in a caption or minipage, can use marginpar
     \else
       \textcolor{red}{xxx~}% notice trailing space
     \fi
   \else
     \textcolor{red}{xxx~}% notice trailing space
   \fi}
 \gdef\xxx{\@ifnextchar[\xxx@lab\xxx@nolab}
 \long\gdef\xxx@lab[#1]#2{{\bf \small [\xxxmark \textcolor{red}{#2} ---{\sc #1}]}\xspace}
 \long\gdef\xxx@nolab#1{{\bf \small [\xxxmark \textcolor{red}{#1}]}\xspace}
}

\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}

%don't want date printed
\date{}

%make title bold and 14 pt font (Latex default is non-bold, 16 pt)
\title{\Large \bf Town Crier: \\ An Authenticated Data Feed for Smart Contracts}

%for single author (just remove % characters)
%\author{
%{\rm Your N.\ Here}\\
%Your Institution
%\and
%{\rm Second Name}\\
%Second Institution
%\and
%{\rm Name}\\
%Name Institution
%} % end author


%**** COLORS *********
\definecolor{maroon}{RGB}{178, 34, 34}
%\definecolor{brown}{RGB}{139, 137, 137}
\definecolor{gold}{rgb}{0.85, 0.65, 0.13}

\newcommand{\smaroon}[1]{{\ensuremath{\tt {\color{maroon} #1}\xspace}}}
\newcommand{\sgold}[1]{\ensuremath{\tt {\color{gold} #1 \xspace}}}
\newcommand{\sbrown}[1]{\ensuremath{\tt {\color{brown} #1 \xspace}}}

\newcommand{\sgray}[1]{{\color{gray} #1}}

%**** DEFINITIONS *********

\newcommand {\tcs} {Town Crier\xspace}
\newcommand {\tc} {TC\xspace}
\newcommand {\tcontract} {{TC Contract}\xspace}
\newcommand {\encname} {{Enclave}\xspace}
\newcommand {\medname} {{Relay}\xspace}
\newcommand {\Time} {{{\tt T}}}


\newcommand {\cont} {\ensuremath{{\cal C}}\xspace}
\newcommand {\wallet} {\ensuremath{{\cal W}}\xspace}
\newcommand {\reqcont} {\ensuremath{\cont_U}\xspace}
\newcommand {\tcont} {\ensuremath{\cont_{TC}}\xspace}
\newcommand {\tcadd} {\ensuremath{\wallet_{TC}}\xspace}
\newcommand {\pTC} {\ensuremath{\wallet_{TC}}\xspace}
\newcommand {\sgxadd} {\ensuremath{\wallet_{SGX}}\xspace}
\newcommand{\pkTC}{\ensuremath{{\sf pk}_{TC}}\xspace}
%\newcommand{\pkTC}{\ensuremath{{{\cal P}_{TC}.{\sf pk}}}\xspace}
%\newcommand{\skTC}{\ensuremath{{{\cal P}_{TC}.{\sf sk}}}\xspace}
\newcommand{\skTC}{\ensuremath{{\sf sk}_{TC}}\xspace}
%\newcommand{\skTC}{\ensuremath{{\sf sk}_{\textrm{TC}}}\xspace}
\newcommand{\userwallet}{\ensuremath{\wallet_U}\xspace}
\newcommand{\specialwallet}{\ensuremath{\wallet^*}\xspace}

\newcommand {\dgreq} {{\sf req}\xspace}
\newcommand {\dgform} {{\sf params}\xspace}
\newcommand {\dgspec} {{\sf spec}\xspace}
\newcommand {\dgpay} {{\sf \$fee}\xspace}
\newcommand {\dg} {{\sf d}\xspace}
\newcommand {\dgret} {{\sf ans}\xspace}
\newcommand {\dgm} {{\sf data}\xspace}
\newcommand {\dgi} {{\sf d_{\mbox{$i$}}}\xspace}
\newcommand {\dgid} {{\sf id}\xspace}
\newcommand {\dgcallback} {{\sf callback}\xspace}

\newcommand {\att} {{\sf att}\xspace}

\newcommand{\fsgx}{\ensuremath{\mathcal{F}_{\textrm{sgx}}}\xspace}
\newcommand{\pk}{\ensuremath{{\sf pk}}}
\newcommand{\sk}{\ensuremath{{\sf sk}}}
\newcommand{\pkM}{\ensuremath{{\sf pk}_{\mathrm{sgx}}}}
\newcommand{\skM}{\ensuremath{{\sf sk}_{\mathrm{sgx}}}}
\newcommand{\pkU}{\ensuremath{{\sf pk}_{\mathcal{U}}}}
\newcommand{\pU}{\ensuremath{{\mathcal{P}}_{\mathcal{U}}}}
%\newcommand{\pksgx}{\ensuremath{{\mathcal{P}}_{\text{TC}}.{\sf pk}}}
\newcommand{\pksgx}{\ensuremath{{\sf pk}_{\textrm{TC}}}\xspace}
\newcommand{\sksgx}{\ensuremath{{\sf sk}_{\textrm{TC}}}\xspace}
\newcommand{\pkurl}{\ensuremath{{\sf pk}_{\textrm{url}}}\xspace}
\newcommand{\rl}{\ensuremath{{\sf RL}}}
\newcommand{\relay}{\ensuremath{\mathcal{R}}\xspace}
\newcommand{\engine}{\ensuremath{\enclaveprog}\xspace}
%\newcommand{\digest}{\ensuremath{{\sf digest}}}
\newcommand{\enclaveprog}{\ensuremath{{\sf prog}_{\textrm{encl}}}\xspace}
\newcommand{\prog}{\ensuremath{{\sf prog}}\xspace}
\newcommand{\sigatt}{\ensuremath{{\sigma_{\textrm{att}}}}\xspace}
\newcommand{\sigsgx}{\ensuremath{{\Sigma_{\textrm{sgx}}}}}
\newcommand{\weburl}{\ensuremath{{{\sf url}}}\xspace}
\newcommand{\clock}{\ensuremath{{{\sf clock}}}}
\newcommand{\algA}{\ensuremath{\mathcal{A}}}
\newcommand{\algB}{\ensuremath{\mathcal{B}}}

\newcommand{\initcall}{\texttt{init}\xspace}
\newcommand{\attcall}{\texttt{attest}\xspace}
\newcommand{\resumecall}{\texttt{resume}\xspace}

\newcommand{\gas}{\sbrown{\$g}}
\newcommand{\constgasmin}{\sbrown{\$G_\text{min}}}
\newcommand{\constgasmax}{\sbrown{\$G_\text{max}}}
\newcommand{\constgascancel}{\sbrown{\$G_\emptyset}}
\newcommand{\gasdeliver}{\sbrown{\$g_\text{dvr}}}
\newcommand{\gasrequest}{\sbrown{\$g_\text{req}}}
\newcommand{\gascallback}{\sbrown{\$g_\text{clbk}}}
\newcommand{\gascancel}{\sbrown{\$g_\text{cncl}}}
\newcommand{\fee}{\smaroon{\$f}}
\newcommand{\constgasinvokecancel}{\sbrown{\$G_\text{cncl}}}
\newcommand{\constgasrequest}{\sbrown{\$G_\text{req}}}
\newcommand{\consthonestfee}{\smaroon{\$F}}


%*****************************

\begin{document}

\maketitle

% Use the following at camera-ready time to suppress page numbers.
% Comment it out when you first submit the paper for review.
% \thispagestyle{empty}

\input{abstract}
\input{introduction}
\input{background}
\input{architecture}
\input{protocol}
\input{implementation}
\input{analysis}
\input{applications}
\input{experiments}

\input{related}
\input{conclusion}

{\footnotesize
  \bibliographystyle{acm}
  \bibliography{ethereum,sgx,bitcoin,elaine}
}

\pagebreak
\appendix 
%\input{clock}
\input{applications-full}
\input{sgxmodel}
\input{analysis-proofs}
\input{advanced}
\input{pseudocode}



%\theendnotes
\end{document}
